<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Module: ActiveRecord::Acts::Versioned
  
    &mdash; Documentation by YARD 0.9.16
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "ActiveRecord::Acts::Versioned";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (V)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Acts.html" title="ActiveRecord::Acts (module)">Acts</a></span></span>
     &raquo; 
    <span class="title">Versioned</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Module: ActiveRecord::Acts::Versioned
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/plugins/acts_as_versioned/lib/acts_as_versioned.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Specify this act if you want to save a copy of the row in a versioned
table.  This assumes there is a  versioned table ready and that your model
has a version field.  This works with optimistic locking if the
lock_version column is present as well.</p>

<p>The class for the versioned model is derived the first time it is seen.
Therefore, if you change your database schema you have to restart your
container for the changes to be reflected. In development mode this usually
means restarting WEBrick.</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>Page</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span></span><span class='op'>::</span><span class='const'>Base</span>
  <span class='comment'># assumes pages_versions table
</span>  <span class='id identifier rubyid_acts_as_versioned'>acts_as_versioned</span>
<span class='kw'>end</span>
</code></pre>

<p>Example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_page'>page</span> <span class='op'>=</span> <span class='const'>Page</span><span class='period'>.</span><span class='id identifier rubyid_create'>create</span><span class='lparen'>(</span><span class='symbol'>:title</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello world!</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_page'>page</span><span class='period'>.</span><span class='id identifier rubyid_version'>version</span>       <span class='comment'># =&gt; 1
</span>
<span class='id identifier rubyid_page'>page</span><span class='period'>.</span><span class='id identifier rubyid_title'>title</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hello world</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_page'>page</span><span class='period'>.</span><span class='id identifier rubyid_save'>save</span>
<span class='id identifier rubyid_page'>page</span><span class='period'>.</span><span class='id identifier rubyid_version'>version</span>       <span class='comment'># =&gt; 2
</span><span class='id identifier rubyid_page'>page</span><span class='period'>.</span><span class='id identifier rubyid_versions'>versions</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='comment'># =&gt; 2
</span>
<span class='id identifier rubyid_page'>page</span><span class='period'>.</span><span class='id identifier rubyid_revert_to'>revert_to</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>  <span class='comment'># using version number
</span><span class='id identifier rubyid_page'>page</span><span class='period'>.</span><span class='id identifier rubyid_title'>title</span>         <span class='comment'># =&gt; &#39;hello world!&#39;
</span>
<span class='id identifier rubyid_page'>page</span><span class='period'>.</span><span class='id identifier rubyid_revert_to'>revert_to</span><span class='lparen'>(</span><span class='id identifier rubyid_page'>page</span><span class='period'>.</span><span class='id identifier rubyid_versions'>versions</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span><span class='rparen'>)</span> <span class='comment'># using versioned instance
</span><span class='id identifier rubyid_page'>page</span><span class='period'>.</span><span class='id identifier rubyid_title'>title</span>         <span class='comment'># =&gt; &#39;hello world&#39;
</span>
<span class='id identifier rubyid_page'>page</span><span class='period'>.</span><span class='id identifier rubyid_versions'>versions</span><span class='period'>.</span><span class='id identifier rubyid_earliest'>earliest</span> <span class='comment'># efficient query to find the first version
</span><span class='id identifier rubyid_page'>page</span><span class='period'>.</span><span class='id identifier rubyid_versions'>versions</span><span class='period'>.</span><span class='id identifier rubyid_latest'>latest</span>   <span class='comment'># efficient query to find the most recently created version
</span></code></pre>

<p>Simple Queries to page between versions</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_page'>page</span><span class='period'>.</span><span class='id identifier rubyid_versions'>versions</span><span class='period'>.</span><span class='id identifier rubyid_before'>before</span><span class='lparen'>(</span><span class='id identifier rubyid_version'>version</span><span class='rparen'>)</span> 
<span class='id identifier rubyid_page'>page</span><span class='period'>.</span><span class='id identifier rubyid_versions'>versions</span><span class='period'>.</span><span class='id identifier rubyid_after'>after</span><span class='lparen'>(</span><span class='id identifier rubyid_version'>version</span><span class='rparen'>)</span>
</code></pre>

<p>Access the previous/next versions from the versioned model itself</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_version'>version</span> <span class='op'>=</span> <span class='id identifier rubyid_page'>page</span><span class='period'>.</span><span class='id identifier rubyid_versions'>versions</span><span class='period'>.</span><span class='id identifier rubyid_latest'>latest</span>
<span class='id identifier rubyid_version'>version</span><span class='period'>.</span><span class='id identifier rubyid_previous'>previous</span> <span class='comment'># go back one version
</span><span class='id identifier rubyid_version'>version</span><span class='period'>.</span><span class='id identifier rubyid_next'>next</span>     <span class='comment'># go forward one version
</span></code></pre>

<p>See ActiveRecord::Acts::Versioned::ClassMethods#acts_as_versioned for
configuration options</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>2.0.0</p>
</div>
      
    </li>
  
</ul>

</div><h2>Defined Under Namespace</h2>
<p class="children">
  
    
      <strong class="modules">Modules:</strong> <span class='object_link'><a href="Versioned/ActMethods.html" title="ActiveRecord::Acts::Versioned::ActMethods (module)">ActMethods</a></span>, <span class='object_link'><a href="Versioned/ClassMethods.html" title="ActiveRecord::Acts::Versioned::ClassMethods (module)">ClassMethods</a></span>
    
  
    
  
</p>

  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="CALLBACKS-constant" class="">CALLBACKS =
          
        </dt>
        <dd><pre class="code"><span class='lbracket'>[</span><span class='symbol'>:set_new_version</span><span class='comma'>,</span> <span class='symbol'>:save_version_on_create</span><span class='comma'>,</span> <span class='symbol'>:save_version?</span><span class='comma'>,</span> <span class='symbol'>:clear_altered_attributes</span><span class='rbracket'>]</span></pre></dd>
      
    </dl>
  







  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#included-class_method" title="included (class method)">.<strong>included</strong>(base)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:nodoc:.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="included-class_method">
  
    .<strong>included</strong>(base)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>:nodoc:</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


70
71
72</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/plugins/acts_as_versioned/lib/acts_as_versioned.rb', line 70</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_included'>included</span><span class='lparen'>(</span><span class='id identifier rubyid_base'>base</span><span class='rparen'>)</span> <span class='comment'># :nodoc:
</span>  <span class='id identifier rubyid_base'>base</span><span class='period'>.</span><span class='id identifier rubyid_extend'>extend</span> <span class='const'><span class='object_link'><a href="Versioned/ClassMethods.html" title="ActiveRecord::Acts::Versioned::ClassMethods (module)">ClassMethods</a></span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Fri Dec 14 21:58:12 2018 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.16 (ruby-2.3.8).
</div>

    </div>
  </body>
</html>