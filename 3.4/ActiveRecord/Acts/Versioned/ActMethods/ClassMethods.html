<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Module: ActiveRecord::Acts::Versioned::ActMethods::ClassMethods
  
    &mdash; Documentation by YARD 0.9.16
  
</title>

  <link rel="stylesheet" href="../../../../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../../../../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "ActiveRecord::Acts::Versioned::ActMethods::ClassMethods";
  relpath = '../../../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../../../_index.html">Index (C)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../../Acts.html" title="ActiveRecord::Acts (module)">Acts</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../Versioned.html" title="ActiveRecord::Acts::Versioned (module)">Versioned</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../ActMethods.html" title="ActiveRecord::Acts::Versioned::ActMethods (module)">ActMethods</a></span></span>
     &raquo; 
    <span class="title">ClassMethods</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Module: ActiveRecord::Acts::Versioned::ActMethods::ClassMethods
  
  <span class="deprecated note title">Deprecated</span>
  
</h1>
<div class="box_info">
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/plugins/acts_as_versioned/lib/acts_as_versioned.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <div class="note deprecated"><strong>Deprecated.</strong> <div class='inline'>
<p>Removed at 4.0.0</p>
</div></div>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>2.0.0</p>
</div>
      
    </li>
  
</ul>

</div>






  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_versioned_table-instance_method" title="#create_versioned_table (instance method)">#<strong>create_versioned_table</strong>(create_table_options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Rake migration task to create the versioned table using options passed to
acts_as_versioned.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#drop_versioned_table-instance_method" title="#drop_versioned_table (instance method)">#<strong>drop_versioned_table</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Rake migration task to drop the versioned table.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_version-instance_method" title="#find_version (instance method)">#<strong>find_version</strong>(id, version = nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Finds a specific version of a specific row of this model.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_versions-instance_method" title="#find_versions (instance method)">#<strong>find_versions</strong>(id, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Finds versions of a specific model.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#versioned_class-instance_method" title="#versioned_class (instance method)">#<strong>versioned_class</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns an instance of the dynamic versioned model.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#versioned_columns-instance_method" title="#versioned_columns (instance method)">#<strong>versioned_columns</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns an array of columns that are versioned.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#without_locking-instance_method" title="#without_locking (instance method)">#<strong>without_locking</strong>(&amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Turns off optimistic locking for the duration of the block.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#without_revision-instance_method" title="#without_revision (instance method)">#<strong>without_revision</strong>(&amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Executes the block with the versioning callbacks disabled.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="create_versioned_table-instance_method">
  
    #<strong>create_versioned_table</strong>(create_table_options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Rake migration task to create the versioned table using options passed to
acts_as_versioned</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


489
490
491
492
493
494
495
496
497
498
499
500
501
502
503
504
505
506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/plugins/acts_as_versioned/lib/acts_as_versioned.rb', line 489</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_versioned_table'>create_versioned_table</span><span class='lparen'>(</span><span class='id identifier rubyid_create_table_options'>create_table_options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='comment'># create version column in main table if it does not exist
</span>  <span class='kw'>if</span> <span class='op'>!</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_content_columns'>content_columns</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_c'>c</span><span class='op'>|</span> <span class='qwords_beg'>%w(</span><span class='tstring_content'>version</span><span class='words_sep'> </span><span class='tstring_content'>lock_version</span><span class='tstring_end'>)</span></span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='id identifier rubyid_c'>c</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span> <span class='rbrace'>}</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_connection'>connection</span><span class='period'>.</span><span class='id identifier rubyid_add_column'>add_column</span> <span class='id identifier rubyid_table_name'>table_name</span><span class='comma'>,</span> <span class='symbol'>:version</span><span class='comma'>,</span> <span class='symbol'>:integer</span>
  <span class='kw'>end</span>

  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_connection'>connection</span><span class='period'>.</span><span class='id identifier rubyid_create_table'>create_table</span><span class='lparen'>(</span><span class='id identifier rubyid_versioned_table_name'>versioned_table_name</span><span class='comma'>,</span> <span class='id identifier rubyid_create_table_options'>create_table_options</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_t'>t</span><span class='op'>|</span>
    <span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_column'>column</span> <span class='id identifier rubyid_versioned_foreign_key'>versioned_foreign_key</span><span class='comma'>,</span> <span class='symbol'>:integer</span>
    <span class='id identifier rubyid_t'>t</span><span class='period'>.</span><span class='id identifier rubyid_column'>column</span> <span class='symbol'>:version</span><span class='comma'>,</span> <span class='symbol'>:integer</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_updated_col'>updated_col</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_versioned_columns'>versioned_columns</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_col'>col</span><span class='op'>|</span> 
    <span class='id identifier rubyid_updated_col'>updated_col</span> <span class='op'>=</span> <span class='id identifier rubyid_col'>col</span> <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_updated_col'>updated_col</span> <span class='op'>&amp;&amp;</span> <span class='tstring'><span class='tstring_beg'>%(</span><span class='tstring_content'>updated_at updated_on</span><span class='tstring_end'>)</span></span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_col'>col</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_connection'>connection</span><span class='period'>.</span><span class='id identifier rubyid_add_column'>add_column</span> <span class='id identifier rubyid_versioned_table_name'>versioned_table_name</span><span class='comma'>,</span> <span class='id identifier rubyid_col'>col</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_col'>col</span><span class='period'>.</span><span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> 
      <span class='symbol'>:limit</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_col'>col</span><span class='period'>.</span><span class='id identifier rubyid_limit'>limit</span><span class='comma'>,</span> 
      <span class='symbol'>:default</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_col'>col</span><span class='period'>.</span><span class='id identifier rubyid_default'>default</span><span class='comma'>,</span>
      <span class='symbol'>:scale</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_col'>col</span><span class='period'>.</span><span class='id identifier rubyid_scale'>scale</span><span class='comma'>,</span>
      <span class='symbol'>:precision</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_col'>col</span><span class='period'>.</span><span class='id identifier rubyid_precision'>precision</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_type_col'>type_col</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_columns_hash'>columns_hash</span><span class='lbracket'>[</span><span class='id identifier rubyid_inheritance_column'>inheritance_column</span><span class='rbracket'>]</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_connection'>connection</span><span class='period'>.</span><span class='id identifier rubyid_add_column'>add_column</span> <span class='id identifier rubyid_versioned_table_name'>versioned_table_name</span><span class='comma'>,</span> <span class='id identifier rubyid_versioned_inheritance_column'>versioned_inheritance_column</span><span class='comma'>,</span> <span class='id identifier rubyid_type_col'>type_col</span><span class='period'>.</span><span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> 
      <span class='symbol'>:limit</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_type_col'>type_col</span><span class='period'>.</span><span class='id identifier rubyid_limit'>limit</span><span class='comma'>,</span> 
      <span class='symbol'>:default</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_type_col'>type_col</span><span class='period'>.</span><span class='id identifier rubyid_default'>default</span><span class='comma'>,</span>
      <span class='symbol'>:scale</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_type_col'>type_col</span><span class='period'>.</span><span class='id identifier rubyid_scale'>scale</span><span class='comma'>,</span>
      <span class='symbol'>:precision</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_type_col'>type_col</span><span class='period'>.</span><span class='id identifier rubyid_precision'>precision</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_updated_col'>updated_col</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_connection'>connection</span><span class='period'>.</span><span class='id identifier rubyid_add_column'>add_column</span> <span class='id identifier rubyid_versioned_table_name'>versioned_table_name</span><span class='comma'>,</span> <span class='symbol'>:updated_at</span><span class='comma'>,</span> <span class='symbol'>:timestamp</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="drop_versioned_table-instance_method">
  
    #<strong>drop_versioned_table</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Rake migration task to drop the versioned table</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


524
525
526</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/plugins/acts_as_versioned/lib/acts_as_versioned.rb', line 524</span>

<span class='kw'>def</span> <span class='id identifier rubyid_drop_versioned_table'>drop_versioned_table</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_connection'>connection</span><span class='period'>.</span><span class='id identifier rubyid_drop_table'>drop_table</span> <span class='id identifier rubyid_versioned_table_name'>versioned_table_name</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_version-instance_method">
  
    #<strong>find_version</strong>(id, version = nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Finds a specific version of a specific row of this model</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


457
458
459
460
461
462
463
464
465
466
467
468</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/plugins/acts_as_versioned/lib/acts_as_versioned.rb', line 457</span>

<span class='kw'>def</span> <span class='id identifier rubyid_find_version'>find_version</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_version'>version</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_version'>version</span>

  <span class='id identifier rubyid_conditions'>conditions</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_versioned_foreign_key'>versioned_foreign_key</span><span class='embexpr_end'>}</span><span class='tstring_content'> = ? AND version = ?</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_version'>version</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='symbol'>:conditions</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_conditions'>conditions</span><span class='comma'>,</span> <span class='symbol'>:limit</span> <span class='op'>=&gt;</span> <span class='int'>1</span> <span class='rbrace'>}</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_find_versions'>find_versions</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
    <span class='id identifier rubyid_result'>result</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>RecordNotFound</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Couldn&#39;t find </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'> with ID=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_content'> and VERSION=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_version'>version</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_versions-instance_method">
  
    #<strong>find_versions</strong>(id, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Finds versions of a specific model.  Takes an options hash like
<code>find</code></p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


471
472
473
474
475
476</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/plugins/acts_as_versioned/lib/acts_as_versioned.rb', line 471</span>

<span class='kw'>def</span> <span class='id identifier rubyid_find_versions'>find_versions</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_versioned_class'>versioned_class</span><span class='period'>.</span>
      <span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:conditions</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='id identifier rubyid_versioned_foreign_key'>versioned_foreign_key</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_id'>id</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span>
      <span class='id identifier rubyid_limit'>limit</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:limit</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span>
      <span class='id identifier rubyid_order'>order</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>version</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="versioned_class-instance_method">
  
    #<strong>versioned_class</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns an instance of the dynamic versioned model</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


484
485
486</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/plugins/acts_as_versioned/lib/acts_as_versioned.rb', line 484</span>

<span class='kw'>def</span> <span class='id identifier rubyid_versioned_class'>versioned_class</span>
  <span class='id identifier rubyid_const_get'>const_get</span> <span class='id identifier rubyid_versioned_class_name'>versioned_class_name</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="versioned_columns-instance_method">
  
    #<strong>versioned_columns</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns an array of columns that are versioned.  See non_versioned_columns</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


479
480
481</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/plugins/acts_as_versioned/lib/acts_as_versioned.rb', line 479</span>

<span class='kw'>def</span> <span class='id identifier rubyid_versioned_columns'>versioned_columns</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_columns'>columns</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_c'>c</span><span class='op'>|</span> <span class='op'>!</span><span class='id identifier rubyid_non_versioned_columns'>non_versioned_columns</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_c'>c</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="without_locking-instance_method">
  
    #<strong>without_locking</strong>(&amp;block)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Turns off optimistic locking for the duration of the block</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Foo</span><span class='period'>.</span><span class='id identifier rubyid_without_locking'>without_locking</span> <span class='kw'>do</span>
  <span class='ivar'>@foo</span><span class='period'>.</span><span class='id identifier rubyid_save'>save</span>
<span class='kw'>end</span>
</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


556
557
558
559
560
561
562</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/plugins/acts_as_versioned/lib/acts_as_versioned.rb', line 556</span>

<span class='kw'>def</span> <span class='id identifier rubyid_without_locking'>without_locking</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_current'>current</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span></span><span class='op'>::</span><span class='const'>Base</span><span class='period'>.</span><span class='id identifier rubyid_lock_optimistically'>lock_optimistically</span>
  <span class='const'><span class='object_link'><a href="../../../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span></span><span class='op'>::</span><span class='const'>Base</span><span class='period'>.</span><span class='id identifier rubyid_lock_optimistically'>lock_optimistically</span> <span class='op'>=</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='id identifier rubyid_current'>current</span>
  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span>
  <span class='const'><span class='object_link'><a href="../../../../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span></span><span class='op'>::</span><span class='const'>Base</span><span class='period'>.</span><span class='id identifier rubyid_lock_optimistically'>lock_optimistically</span> <span class='op'>=</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id identifier rubyid_current'>current</span>
  <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="without_revision-instance_method">
  
    #<strong>without_revision</strong>(&amp;block)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Executes the block with the versioning callbacks disabled.</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Foo</span><span class='period'>.</span><span class='id identifier rubyid_without_revision'>without_revision</span> <span class='kw'>do</span>
  <span class='ivar'>@foo</span><span class='period'>.</span><span class='id identifier rubyid_save'>save</span>
<span class='kw'>end</span>
</code></pre>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


534
535
536
537
538
539
540
541
542
543
544
545
546
547
548</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/plugins/acts_as_versioned/lib/acts_as_versioned.rb', line 534</span>

<span class='kw'>def</span> <span class='id identifier rubyid_without_revision'>without_revision</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_class_eval'>class_eval</span> <span class='kw'>do</span> 
    <span class='const'><span class='object_link'><a href="../../Versioned.html#CALLBACKS-constant" title="ActiveRecord::Acts::Versioned::CALLBACKS (constant)">CALLBACKS</a></span></span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_attr_name'>attr_name</span><span class='op'>|</span>
      <span class='id identifier rubyid_alias_method'>alias_method</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>orig_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_attr_name'>attr_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='comma'>,</span> <span class='id identifier rubyid_attr_name'>attr_name</span>
      <span class='id identifier rubyid_alias_method'>alias_method</span> <span class='id identifier rubyid_attr_name'>attr_name</span><span class='comma'>,</span> <span class='symbol'>:empty_callback</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span>
<span class='kw'>ensure</span>
  <span class='id identifier rubyid_class_eval'>class_eval</span> <span class='kw'>do</span> 
    <span class='const'><span class='object_link'><a href="../../Versioned.html#CALLBACKS-constant" title="ActiveRecord::Acts::Versioned::CALLBACKS (constant)">CALLBACKS</a></span></span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_attr_name'>attr_name</span><span class='op'>|</span>
      <span class='id identifier rubyid_alias_method'>alias_method</span> <span class='id identifier rubyid_attr_name'>attr_name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>orig_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_attr_name'>attr_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Sat Dec 15 01:32:25 2018 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.16 (ruby-2.5.3).
</div>

    </div>
  </body>
</html>